name: TestDemo
on: push

jobs:
  my-job:
    name: Fisrt Job
    runs-on: windows-2019
    
    steps:
    - uses: actions/checkout@v4

    - name: Add MSBuild to PATH
      uses: microsoft/setup-msbuild@v1.0.2

    - name: Download
      shell: powershell
      run: Invoke-WebRequest -Uri "https://archive.org/download/pin-3.30-98830-g1d7b601b3-msvc-windows/pin-3.30-98830-g1d7b601b3-msvc-windows.zip" -OutFile "c:\abc.zip"
      
    - name: Unzip
      shell: cmd
      run: |
        mkdir c:\pin
        cd c:\pin
        7z x -y c:\abc.zip
        del c:\abc.zip
          
    - name: MoveTq
      working-directory: c:\pin
      # Add additional options to the MSBuild command line here (like platform or verbosity level).
      # See https://docs.microsoft.com/visualstudio/msbuild/msbuild-command-line-reference
      run: xcopy ${{env.GITHUB_WORKSPACE}} c:\pin\source\tools\

    - name: Build
      working-directory: c:\pin\source\tools\
      # Add additional options to the MSBuild command line here (like platform or verbosity level).
      # See https://docs.microsoft.com/visualstudio/msbuild/msbuild-command-line-reference
      run: msbuild /m /p:Configuration=${{env.BUILD_CONFIGURATION}} c:\pin\source\tools\tiny_tracer\TinyTracer.vcxproj  

      

